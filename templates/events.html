<!DOCTYPE html>
<html lang="en">
<head>
    <title>Events</title>
    <script>
        window.onpageshow = function (event) {
            if (event.persisted) {
                window.location.href = "/auth/login";
            }
        };
    </script>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>
    <link rel="icon" type="image/jpeg" href="/images/Personal_Task_Manager.jpeg">
    <style>
        body {
        font-family: Arial;
        padding: 20px;

        background-image: url("/images/background.jpeg");
        background-repeat: no-repeat;
        background-position: center top;
        background-size: cover;
        background-attachment: fixed;

        min-height: 100vh;
        }
        .event-box {
            background: white;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .date {
            font-size: 14px;
            color: gray;
        }

        .past {
            opacity: 0.6;
        }

        .btn {
            padding: 6px 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .btn-edit { background: #007bff; color: white; }
        .btn-delete { background: #dc3545; color: white; }
        a.button { padding: 8px 12px; background: #4CAF50; color: white; text-decoration: none; border-radius: 4px; }
    </style>
</head>
<body>

<h1>Your Events</h1>

<a href="/auth/add-event" class="button">Add Event</a>
<a href="/auth/dashboard" class="button">Home</a>

<hr>
<br>

<h1>My Events</h1>


<h2>ðŸ“… Upcoming Events</h2>

{% if upcoming_events %}
    {% for event in upcoming_events %}
        <div class="event-box">
            <h3>{{ event.event_name }}</h3>
            <p>{{ event.location }}</p>
            <p class="date">{{ event.event_date }} at {{ event.event_time }}</p>

            <a href="/auth/edit-event/{{ event.id }}">
                <button class="btn btn-edit">Edit</button>
            </a>
            <a href="/auth/delete-event/{{ event.id }}">
                <button class="btn btn-delete">Delete</button>
            </a>
        </div>
    {% endfor %}
{% else %}
    <p>No upcoming events.</p>
{% endif %}

<h2>ðŸ•’ Past Events</h2>

{% if past_events %}
    {% for event in past_events %}
        <div class="event-box past">
            <h3>{{ event.event_name }}</h3>
            <p>{{ event.location }}</p>
            <p class="date">{{ event.event_date }} at {{ event.event_time }}</p>

            <a href="/auth/delete-event/{{ event.id }}">
                <button class="btn btn-delete">Delete</button>
            </a>
        </div>
    {% endfor %}
{% else %}
    <p>No past events.</p>
{% endif %}

</body>
</html>