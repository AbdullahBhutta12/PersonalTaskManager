<!DOCTYPE html>
<html lang="en">
<head>
    <title>My Tasks</title>
    <script>
        window.onpageshow = function (event) {
            if (event.persisted) {
                window.location.href = "/auth/login";
            }
        };
    </script>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache"/>
    <meta http-equiv="Expires" content="0"/>

    <link rel="icon" type="image/jpeg" href="http://192.168.1.11:8000/images/Personal_Task_Manager.jpeg">

    <style>
        body {
            font-family: Arial;
            margin: 30px;
            background: url("http://192.168.1.11:8000/images/background.jpeg") no-repeat center/cover;
            background-attachment: fixed;
            min-height: 100vh;
        }

        .task-box {
            background: white;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        a.button {
            padding: 8px 12px;
            background: #4CAF50;
            color: white;
            text-decoration: none;
            border-radius: 4px;
        }

        .danger { background: #dc3545 !important; }

        .completed {
            opacity: 0.7;
        }
    </style>
</head>
<body>

<h1>Your Tasks</h1>

<a href="http://0.0.0.0:8000/auth/add-task" class="button">Add Task</a>
<a href="http://0.0.0.0:8000/auth/dashboard" class="button">Home</a>

<hr>

<!-- ğŸ”¹ UNCOMPLETED TASKS -->
<h2>ğŸ“Œ Pending Tasks</h2>

{% if pending_tasks %}
    {% for task in pending_tasks %}
    <div class="task-box">
        <h3>{{ task.title }}</h3>
        <p>{{ task.description }}</p>

        <a href="http://0.0.0.0:8000/auth/mark/{{ task.id }}" class="button">Mark as Done</a>
        <a href="http://0.0.0.0:8000/auth/delete/{{ task.id }}" class="button danger">Delete</a>
    </div>
    {% endfor %}
{% else %}
    <p>No pending tasks</p>
{% endif %}

<hr>

<!-- ğŸ”¹ COMPLETED TASKS -->
<h2>âœ… Completed Tasks</h2>

{% if completed_tasks %}
    {% for task in completed_tasks %}
    <div class="task-box completed">
        <h3>ğŸ“ {{ task.title }}</h3>
        <p>{{ task.description }}</p>
        <strong style="color: green;">Completed âœ”</strong>
        <br><br>
        <a href="http://0.0.0.0:8000/auth/delete/{{ task.id }}" class="button danger">Delete</a>
    </div>
    {% endfor %}
{% else %}
    <p>No completed tasks yet</p>
{% endif %}

</body>
</html>